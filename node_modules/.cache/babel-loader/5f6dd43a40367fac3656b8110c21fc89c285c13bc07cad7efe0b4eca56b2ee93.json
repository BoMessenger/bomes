{"ast":null,"code":"\"use strict\";\n\nvar Shim = require(\"./shim\");\nvar GenericCollection = require(\"./generic-collection\");\nvar Map, GlobalMap, CollectionsMap;\nif (global.Map !== void 0 && typeof global.Set.prototype.values === \"function\") {\n  Map = module.exports = global.Map, GlobalMap = Map;\n  Map.Map = Map; // hack so require(\"map\").Map will work in MontageJS\n\n  // use different strategies for making sets observable between Internet\n  // Explorer and other browsers.\n  var protoIsSupported = {}.__proto__ === Object.prototype,\n    map_makeObservable;\n  if (protoIsSupported) {\n    map_makeObservable = function () {\n      this.__proto__ = ChangeDispatchMap;\n    };\n  } else {\n    map_makeObservable = function () {\n      Object.defineProperties(this, observableSetProperties);\n    };\n  }\n  Object.defineProperty(Map.prototype, \"makeObservable\", {\n    value: map_makeObservable,\n    writable: true,\n    configurable: true,\n    enumerable: false\n  });\n\n  //This is a no-op test in property-changes.js - PropertyChanges.prototype.makePropertyObservable, so might as well not pay the price every time....\n  Object.defineProperty(Map.prototype, \"makePropertyObservable\", {\n    value: function () {},\n    writable: true,\n    configurable: true,\n    enumerable: false\n  });\n  Map.prototype.constructClone = function (values) {\n    return new this.constructor(values);\n  };\n  Map.prototype.isMap = true;\n  Map.prototype.addEach = function (values) {\n    if (values && Object(values) === values) {\n      if (typeof values.forEach === \"function\") {\n        // copy map-alikes\n        if (values.isMap === true) {\n          values.forEach(function (value, key) {\n            this.set(key, value);\n          }, this);\n          // iterate key value pairs of other iterables\n        } else {\n          values.forEach(function (pair) {\n            this.set(pair[0], pair[1]);\n          }, this);\n        }\n      } else if (typeof values.length === \"number\") {\n        // Array-like objects that do not implement forEach, ergo,\n        // Arguments\n        for (var i = 0; i < values.length; i++) {\n          this.add(values[i], i);\n        }\n      } else {\n        // copy other objects as map-alikes\n        Object.keys(values).forEach(function (key) {\n          this.set(key, values[key]);\n        }, this);\n      }\n    } else if (values && typeof values.length === \"number\") {\n      // String\n      for (var i = 0; i < values.length; i++) {\n        this.add(values[i], i);\n      }\n    }\n    return this;\n  };\n  Map.prototype.add = function (value, key) {\n    return this.set(key, value);\n  };\n  Map.prototype.reduce = function (callback, basis /*, thisp*/) {\n    var thisp = arguments[2];\n    this.forEach(function (value, key, map) {\n      basis = callback.call(thisp, basis, value, key, this);\n    });\n    return basis;\n  };\n  Map.prototype.reduceRight = function (callback, basis /*, thisp*/) {\n    var thisp = arguments[2];\n    var keysIterator = this.keys();\n    var size = this.size;\n    var reverseOrder = new Array(this.size);\n    var aKey,\n      i = 0;\n    while (aKey = keysIterator.next().value) {\n      reverseOrder[--size] = aKey;\n    }\n    while (i++ < size) {\n      basis = callback.call(thisp, basis, this.get(reverseOrder[i]), reverseOrder[i], this);\n    }\n    return basis;\n  };\n  Map.prototype.equals = function (that, equals) {\n    equals = equals || Object.equals;\n    if (this === that) {\n      return true;\n    } else if (that && typeof that.every === \"function\") {\n      return that.size === this.size && that.every(function (value, key) {\n        return equals(this.get(key), value);\n      }, this);\n    } else {\n      var keys = Object.keys(that);\n      return keys.length === this.size && Object.keys(that).every(function (key) {\n        return equals(this.get(key), that[key]);\n      }, this);\n    }\n  };\n  var _keysArrayFunction = function (value, key) {\n    return key;\n  };\n  Map.prototype.keysArray = function () {\n    return this.map(_keysArrayFunction);\n  };\n  var _valuesArrayFunction = function (value, key) {\n    return value;\n  };\n  Map.prototype.valuesArray = function () {\n    return this.map(_valuesArrayFunction);\n  };\n  var _entriesArrayFunction = function (value, key) {\n    return [key, value];\n  };\n  Map.prototype.entriesArray = function () {\n    return this.map(_entriesArrayFunction);\n  };\n  Map.prototype.toJSON = function () {\n    return this.entriesArray();\n  };\n\n  // XXX deprecated\n  Map.prototype.items = function () {\n    return this.entriesArray();\n  };\n\n  // Map.prototype.contentEquals = Object.equals;\n  // Map.prototype.contentHash = Object.hash;\n\n  Map.from = function (value) {\n    var result = new this();\n    result.addEach(value);\n    return result;\n  };\n\n  //Backward compatibility:\n  Object.defineProperty(Map.prototype, \"length\", {\n    get: function () {\n      return this.size;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  var map_clear = Map.prototype.clear,\n    map_set = Map.prototype.set,\n    map_delete = Map.prototype.delete;\n  var observableMapProperties = {\n    clear: {\n      value: function () {\n        var keys;\n        if (this.dispatchesMapChanges) {\n          this.forEach(function (value, key) {\n            this.dispatchBeforeMapChange(key, value);\n          }, this);\n          keys = this.keysArray();\n        }\n        map_clear.call(this);\n        if (this.dispatchesMapChanges) {\n          keys.forEach(function (key) {\n            this.dispatchMapChange(key);\n          }, this);\n        }\n      },\n      writable: true,\n      configurable: true\n    },\n    set: {\n      value: function (key, value) {\n        var found = this.get(key);\n        if (found) {\n          // update\n          if (this.dispatchesMapChanges) {\n            this.dispatchBeforeMapChange(key, found);\n          }\n          map_set.call(this, key, value);\n          if (this.dispatchesMapChanges) {\n            this.dispatchMapChange(key, value);\n          }\n        } else {\n          // create\n          if (this.dispatchesMapChanges) {\n            this.dispatchBeforeMapChange(key, undefined);\n          }\n          map_set.call(this, key, value);\n          if (this.dispatchesMapChanges) {\n            this.dispatchMapChange(key, value);\n          }\n        }\n        return this;\n      },\n      writable: true,\n      configurable: true\n    },\n    \"delete\": {\n      value: function (key) {\n        if (this.has(key)) {\n          if (this.dispatchesMapChanges) {\n            this.dispatchBeforeMapChange(key, this.get(key));\n          }\n          map_delete.call(this, key);\n          if (this.dispatchesMapChanges) {\n            this.dispatchMapChange(key, undefined);\n          }\n          return true;\n        }\n        return false;\n      }\n    }\n  };\n  Object.addEach(Map.prototype, GenericCollection.prototype, false);\n  var ChangeDispatchMap = Object.create(Map.prototype, observableMapProperties);\n}\nvar Set = require(\"./_set\").CollectionsSet;\nvar GenericMap = require(\"./generic-map\");\nCollectionsMap = Map = function Map(values, equals, hash, getDefault) {\n  if (!(this instanceof Map)) {\n    return new Map(values, equals, hash, getDefault);\n  }\n  equals = equals || Object.equals;\n  hash = hash || Object.hash;\n  getDefault = getDefault || Function.noop;\n  this.contentEquals = equals;\n  this.contentHash = hash;\n  this.getDefault = getDefault;\n  this.store = new Set(undefined, function keysEqual(a, b) {\n    return equals(a.key, b.key);\n  }, function keyHash(item) {\n    return hash(item.key);\n  });\n  this.length = 0;\n  this.addEach(values);\n};\nMap.Map = Map; // hack so require(\"map\").Map will work in MontageJS\n\nObject.addEach(Map.prototype, GenericCollection.prototype);\nObject.addEach(Map.prototype, GenericMap.prototype); // overrides GenericCollection\nObject.defineProperty(Map.prototype, \"size\", GenericCollection._sizePropertyDescriptor);\nMap.from = GenericCollection.from;\nMap.prototype.constructClone = function (values) {\n  return new this.constructor(values, this.contentEquals, this.contentHash, this.getDefault);\n};\nMap.prototype.log = function (charmap, logNode, callback, thisp) {\n  logNode = logNode || this.logNode;\n  this.store.log(charmap, function (node, log, logBefore) {\n    logNode(node.value.value, log, logBefore);\n  }, callback, thisp);\n};\nMap.prototype.logNode = function (node, log) {\n  log(' key: ' + node.key);\n  log(' value: ' + node.value);\n};\nif (!GlobalMap) {\n  module.exports = CollectionsMap;\n} else {\n  module.exports = GlobalMap;\n  GlobalMap.CollectionsMap = CollectionsMap;\n}","map":{"version":3,"names":["Shim","require","GenericCollection","Map","GlobalMap","CollectionsMap","global","Set","prototype","values","module","exports","protoIsSupported","__proto__","Object","map_makeObservable","ChangeDispatchMap","defineProperties","observableSetProperties","defineProperty","value","writable","configurable","enumerable","constructClone","constructor","isMap","addEach","forEach","key","set","pair","length","i","add","keys","reduce","callback","basis","thisp","arguments","map","call","reduceRight","keysIterator","size","reverseOrder","Array","aKey","next","get","equals","that","every","_keysArrayFunction","keysArray","_valuesArrayFunction","valuesArray","_entriesArrayFunction","entriesArray","toJSON","items","from","result","map_clear","clear","map_set","map_delete","delete","observableMapProperties","dispatchesMapChanges","dispatchBeforeMapChange","dispatchMapChange","found","undefined","has","create","CollectionsSet","GenericMap","hash","getDefault","Function","noop","contentEquals","contentHash","store","keysEqual","a","b","keyHash","item","_sizePropertyDescriptor","log","charmap","logNode","node","logBefore"],"sources":["D:/Gits/bomes/node_modules/collections/_map.js"],"sourcesContent":["\"use strict\";\n\nvar Shim = require(\"./shim\");\nvar GenericCollection = require(\"./generic-collection\");\nvar Map, GlobalMap, CollectionsMap;\n\nif((global.Map !== void 0) && (typeof global.Set.prototype.values === \"function\")) {\n\n    Map = module.exports = global.Map,\n    GlobalMap = Map;\n    Map.Map = Map; // hack so require(\"map\").Map will work in MontageJS\n\n    // use different strategies for making sets observable between Internet\n    // Explorer and other browsers.\n    var protoIsSupported = {}.__proto__ === Object.prototype,\n        map_makeObservable;\n\n    if (protoIsSupported) {\n        map_makeObservable = function () {\n            this.__proto__ = ChangeDispatchMap;\n        };\n    } else {\n        map_makeObservable = function () {\n            Object.defineProperties(this, observableSetProperties);\n        };\n    }\n\n    Object.defineProperty(Map.prototype, \"makeObservable\", {\n        value: map_makeObservable,\n        writable: true,\n        configurable: true,\n        enumerable: false\n    });\n\n    //This is a no-op test in property-changes.js - PropertyChanges.prototype.makePropertyObservable, so might as well not pay the price every time....\n    Object.defineProperty(Map.prototype, \"makePropertyObservable\", {\n        value: function(){},\n        writable: true,\n        configurable: true,\n        enumerable: false\n    });\n\n\n    Map.prototype.constructClone = function (values) {\n        return new this.constructor(values);\n    };\n\n    Map.prototype.isMap = true;\n    Map.prototype.addEach = function (values) {\n        if (values && Object(values) === values) {\n            if (typeof values.forEach === \"function\") {\n                // copy map-alikes\n                if (values.isMap === true) {\n                    values.forEach(function (value, key) {\n                        this.set(key, value);\n                    }, this);\n                // iterate key value pairs of other iterables\n                } else {\n                    values.forEach(function (pair) {\n                        this.set(pair[0], pair[1]);\n                    }, this);\n                }\n            } else if (typeof values.length === \"number\") {\n                // Array-like objects that do not implement forEach, ergo,\n                // Arguments\n                for (var i = 0; i < values.length; i++) {\n                    this.add(values[i], i);\n                }\n            } else {\n                // copy other objects as map-alikes\n                Object.keys(values).forEach(function (key) {\n                    this.set(key, values[key]);\n                }, this);\n            }\n        } else if (values && typeof values.length === \"number\") {\n            // String\n            for (var i = 0; i < values.length; i++) {\n                this.add(values[i], i);\n            }\n        }\n        return this;\n    };\n\n    Map.prototype.add = function (value, key) {\n        return this.set(key, value);\n    };\n\n    Map.prototype.reduce = function (callback, basis /*, thisp*/) {\n        var thisp = arguments[2];\n        this.forEach(function(value, key, map) {\n            basis = callback.call(thisp, basis, value, key, this);\n        });\n        return basis;\n    };\n\n    Map.prototype.reduceRight = function (callback, basis /*, thisp*/) {\n        var thisp = arguments[2];\n        var keysIterator = this.keys();\n        var size = this.size;\n        var reverseOrder = new Array(this.size);\n        var aKey, i = 0;\n        while ((aKey = keysIterator.next().value)) {\n            reverseOrder[--size] = aKey;\n        }\n        while (i++ < size) {\n            basis = callback.call(thisp, basis, this.get(reverseOrder[i]), reverseOrder[i], this);\n        }\n        return basis;\n    };\n\n    Map.prototype.equals = function (that, equals) {\n        equals = equals || Object.equals;\n        if (this === that) {\n            return true;\n        } else if (that && typeof that.every === \"function\") {\n            return that.size === this.size && that.every(function (value, key) {\n                return equals(this.get(key), value);\n            }, this);\n        } else {\n            var keys = Object.keys(that);\n            return keys.length === this.size && Object.keys(that).every(function (key) {\n                return equals(this.get(key), that[key]);\n            }, this);\n        }\n    };\n\n    var _keysArrayFunction = function(value,key) {return key;};\n    Map.prototype.keysArray = function() {\n        return this.map(_keysArrayFunction);\n    }\n    var _valuesArrayFunction = function(value,key) {return value;};\n    Map.prototype.valuesArray = function() {\n        return this.map(_valuesArrayFunction);\n    }\n    var _entriesArrayFunction = function(value,key) {return [key,value];};\n    Map.prototype.entriesArray = function() {\n        return this.map(_entriesArrayFunction);\n    }\n    Map.prototype.toJSON = function () {\n        return this.entriesArray();\n    };\n\n    // XXX deprecated\n    Map.prototype.items = function () {\n        return this.entriesArray();\n    };\n\n    // Map.prototype.contentEquals = Object.equals;\n    // Map.prototype.contentHash = Object.hash;\n\n\n    Map.from = function (value) {\n        var result = new this;\n        result.addEach(value);\n        return result;\n    };\n\n\n    //Backward compatibility:\n    Object.defineProperty(Map.prototype,\"length\",{\n        get: function() {\n            return this.size;\n        },\n        enumerable: true,\n        configurable:true\n    });\n\n\n    var map_clear = Map.prototype.clear,\n        map_set = Map.prototype.set,\n        map_delete = Map.prototype.delete;\n\n    var observableMapProperties = {\n        clear : {\n            value: function () {\n                var keys;\n                if (this.dispatchesMapChanges) {\n                    this.forEach(function (value, key) {\n                        this.dispatchBeforeMapChange(key, value);\n                    }, this);\n                    keys = this.keysArray();\n                }\n                map_clear.call(this);\n                if (this.dispatchesMapChanges) {\n                    keys.forEach(function (key) {\n                        this.dispatchMapChange(key);\n                    }, this);\n                }\n            },\n            writable: true,\n            configurable: true\n\n        },\n        set : {\n            value: function (key, value) {\n                var found = this.get(key);\n                if (found) { // update\n                    if (this.dispatchesMapChanges) {\n                        this.dispatchBeforeMapChange(key, found);\n                    }\n\n                    map_set.call(this,key, value);\n\n                    if (this.dispatchesMapChanges) {\n                        this.dispatchMapChange(key, value);\n                    }\n                } else { // create\n                    if (this.dispatchesMapChanges) {\n                        this.dispatchBeforeMapChange(key, undefined);\n                    }\n\n                    map_set.call(this,key, value);\n\n                    if (this.dispatchesMapChanges) {\n                        this.dispatchMapChange(key, value);\n                    }\n                }\n                return this;\n            },\n            writable: true,\n            configurable: true\n        },\n\n        \"delete\": {\n            value: function (key) {\n                if (this.has(key)) {\n                    if (this.dispatchesMapChanges) {\n                        this.dispatchBeforeMapChange(key, this.get(key));\n                    }\n                    map_delete.call(this,key);\n\n                    if (this.dispatchesMapChanges) {\n                        this.dispatchMapChange(key, undefined);\n                    }\n                    return true;\n                }\n                return false;\n            }\n        }\n    };\n\n\n\n    Object.addEach(Map.prototype, GenericCollection.prototype, false);\n\n    var ChangeDispatchMap = Object.create(Map.prototype, observableMapProperties);\n}\n\n    var Set = require(\"./_set\").CollectionsSet;\n    var GenericMap = require(\"./generic-map\");\n\n    CollectionsMap = Map = function Map(values, equals, hash, getDefault) {\n        if (!(this instanceof Map)) {\n            return new Map(values, equals, hash, getDefault);\n        }\n        equals = equals || Object.equals;\n        hash = hash || Object.hash;\n        getDefault = getDefault || Function.noop;\n        this.contentEquals = equals;\n        this.contentHash = hash;\n        this.getDefault = getDefault;\n        this.store = new Set(\n            undefined,\n            function keysEqual(a, b) {\n                return equals(a.key, b.key);\n            },\n            function keyHash(item) {\n                return hash(item.key);\n            }\n        );\n        this.length = 0;\n        this.addEach(values);\n    }\n\n    Map.Map = Map; // hack so require(\"map\").Map will work in MontageJS\n\n    Object.addEach(Map.prototype, GenericCollection.prototype);\n    Object.addEach(Map.prototype, GenericMap.prototype); // overrides GenericCollection\n    Object.defineProperty(Map.prototype,\"size\",GenericCollection._sizePropertyDescriptor);\n\n    Map.from = GenericCollection.from;\n\n    Map.prototype.constructClone = function (values) {\n        return new this.constructor(\n            values,\n            this.contentEquals,\n            this.contentHash,\n            this.getDefault\n        );\n    };\n\n    Map.prototype.log = function (charmap, logNode, callback, thisp) {\n        logNode = logNode || this.logNode;\n        this.store.log(charmap, function (node, log, logBefore) {\n            logNode(node.value.value, log, logBefore);\n        }, callback, thisp);\n    };\n\n    Map.prototype.logNode = function (node, log) {\n        log(' key: ' + node.key);\n        log(' value: ' + node.value);\n    };\n\n    if(!GlobalMap) {\n        module.exports = CollectionsMap;\n    }\n    else {\n        module.exports = GlobalMap;\n        GlobalMap.CollectionsMap = CollectionsMap;\n    }\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}