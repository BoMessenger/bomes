{"ast":null,"code":"import _regeneratorRuntime from\"D:/Gits/bomes/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Gits/bomes/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/Gits/bomes/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState}from'react';import{Context}from\"../index\";import{useAuthState}from\"react-firebase-hooks/auth\";import{Box,Button,Container,Grid,TextField}from\"@mui/material\";import{getDatabase,ref,set,push,onChildAdded}from\"firebase/database\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Chat=function Chat(){var _ref;var _useContext=useContext(Context),auth=_useContext.auth;var _useAuthState=useAuthState(auth),_useAuthState2=_slicedToArray(_useAuthState,1),user=_useAuthState2[0];var db=getDatabase();var refer=ref(db,\"TestPathWeb\");var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];var messages=[];var sendMessage=function sendMessage(){return(_ref=_ref||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:push(refer,value).then(function(r){});setValue(\"\");case 2:case\"end\":return _context.stop();}},_callee);}))).apply(this,arguments);};onChildAdded(refer,function(snapshot,prevChildKey){var newPost=snapshot.val();messages.push(newPost);});return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Grid,{container:true,style:{height:window.innerHeight-50,marginTop:20},justifyContent:'center',children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'80%',height:'70vh',border:'1px solid gray',overflowY:'auto'},children:messages.map(function(message){return/*#__PURE__*/_jsxs(\"div\",{style:{margin:20},children:[/*#__PURE__*/_jsx(Grid,{container:true,children:/*#__PURE__*/_jsx(\"div\",{children:\"Username\"})}),/*#__PURE__*/_jsx(\"div\",{children:message})]});})}),/*#__PURE__*/_jsxs(Grid,{container:true,direction:'column',alignItems:'flex-end',style:{width:'80%'},children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,value:value,onChange:function onChange(e){return setValue(e.target.value);},maxRows:4,variant:'outlined'}),/*#__PURE__*/_jsx(Button,{onClick:sendMessage,variant:\"contained\",children:\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\"})]})]})})});};export default Chat;","map":{"version":3,"names":["React","useContext","useState","Context","useAuthState","Box","Button","Container","Grid","TextField","getDatabase","ref","set","push","onChildAdded","jsx","_jsx","jsxs","_jsxs","Chat","_ref","_useContext","auth","_useAuthState","_useAuthState2","_slicedToArray","user","db","refer","_useState","_useState2","value","setValue","messages","sendMessage","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","then","r","stop","apply","arguments","snapshot","prevChildKey","newPost","val","children","container","style","height","window","innerHeight","marginTop","justifyContent","width","border","overflowY","map","message","margin","direction","alignItems","fullWidth","onChange","e","target","maxRows","variant","onClick"],"sources":["D:/Gits/bomes/src/components/Chat.js"],"sourcesContent":["import React, {useContext, useState} from 'react';\r\nimport {Context} from \"../index\";\r\nimport {useAuthState} from \"react-firebase-hooks/auth\";\r\nimport {Box, Button, Container, Grid, TextField} from \"@mui/material\";\r\nimport {getDatabase, ref, set, push, onChildAdded} from \"firebase/database\";\r\n\r\nconst Chat = () => {\r\n    const {auth} = useContext(Context)\r\n    const [user] = useAuthState(auth)\r\n    const db = getDatabase()\r\n    const refer = ref(db,\"TestPathWeb\")\r\n    const [value, setValue] = useState(\"\")\r\n    const messages = []\r\n    const sendMessage = async () => {\r\n        push(refer, value).then(r => {})\r\n        setValue(\"\")\r\n    }\r\n    onChildAdded(refer, (snapshot, prevChildKey) => {\r\n        const newPost = snapshot.val();\r\n        messages.push(newPost)\r\n    });\r\n\r\n    return (\r\n        <div>\r\n            <Container>\r\n                <Grid container\r\n                      style={{height: window.innerHeight - 50, marginTop: 20}}\r\n                      justifyContent={'center'}\r\n                >\r\n                    <div style={{width: '80%', height:'70vh', border: '1px solid gray', overflowY: 'auto'}}>\r\n                        {\r\n                            messages.map(message =>\r\n                                <div style={{margin: 20}}>\r\n                                    <Grid container>\r\n                                        <div>{\"Username\"}</div>\r\n                                    </Grid>\r\n                                    <div>{message}</div>\r\n                                </div>\r\n                            )\r\n                        }\r\n                    </div>\r\n                    <Grid\r\n                        container\r\n                        direction={'column'}\r\n                        alignItems={'flex-end'}\r\n                        style={{width: '80%'}}\r\n                    >\r\n                        <TextField fullWidth value={value} onChange={e => setValue(e.target.value)} maxRows={4} variant={'outlined'}/>\r\n                        <Button onClick={sendMessage} variant={\"contained\"}>Отправить</Button>\r\n                    </Grid>\r\n                </Grid>\r\n            </Container>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Chat;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}